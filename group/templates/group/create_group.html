{% load static %}
<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<!-- For Bootstrap Popup Modals -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
<!-- For Bootstrap Popup Modals -->
<title>MeetApp | Create Group</title>
<style>
* {
  box-sizing: border-box;
}

body {
  background-color: #fff;
}

#regForm {
  background-color: #f5f5f5;
  margin: 100px auto;
  font-family: Raleway;
  padding: 40px;
  width: 70%;
  min-width: 300px;
}

h1 {
  text-align: center;  
}

input {
  padding: 10px;
  width: 100%;
  font-size: 17px;
  font-family: Raleway;
  border: 1px solid #aaaaaa;
}

/* Mark input boxes that gets an error on validation: */
input.invalid {
  background-color: #ffdddd;
}

/* Hide all steps by default: */
.tab {
  display: none;
}

button {
  color: #ffffff;
  border: none;
  padding: 10px 20px;
  font-size: 17px;
  font-family: Raleway;
  cursor: pointer;
}

button:hover {
  opacity: 0.8;
}

#prevBtn {
  background-color: #bbbbbb;
}

/* Make circles that indicate the steps of the form: */
.step {
  height: 15px;
  width: 15px;
  margin: 0 2px;
  background-color: rgb(165, 42, 42);
  border: none;  
  border-radius: 50%;
  display: inline-block;
  opacity: 0.5;
}

.step.active {
  opacity: 1;
}

/* Mark the sdisplay: list-item;
    text-align: -webkit-match-parent;teps that are finished and valid: */
.step.finish {
    background-color: rgb(165, 42, 42);
}
#buttons li {
border-radius: 5px;
margin: 5px;
float: left;
list-style: none;
text-align: center;
background-color: #cac7c7;
margin-right: 5px;
width: auto;
line-height: 30px;
}
#buttons li a {
  padding: 5px;
  text-decoration: none;
  color: black;
  display: block;
}
#buttons li a:hover {
  border-radius: 5px;
  text-decoration: none;
  color: #000;
  background-color: rgb(164, 167, 168);
}
.mein{
  display: block;
  position: relative;
  padding-left: 30px;
  margin-bottom: 5px;
  cursor: pointer;
  font-size: 16px;
}
#topicCheckbox{
  visibility: hidden;
}
.w3docs{
  position: absolute;
  top: 0;
  left: 0;
  height: 15px;
  width: 15px;
  background-color: rgb(207, 207, 207);
}
.mein input:active ~.w3docs{
  background-color: #fff;
}
.mein input:checked ~.w3docs{
  background-color: rgb(165, 42, 42);
}
.w3docs:after{
  content: "";
  position: absolute;
  display: none;
}
.mein input:checked ~.w3docs:after{
  display: block;
}
.mein .w3docs:after{
  left: 4px;
  bottom: 3px;
  width: 4px;
  height: 8px;
  border: solid #fff;
  border-width: 0 2px 2px 0;
  -webkit-transform: rotate(45deg);
  -ms-transform: rotate(45deg);
  transform: rotate(45deg);
}
#id_desc{
  width: 100%;
  border-radius: 5px;
}
#id_name{
  margin-bottom: 20px;
  margin-top: 30px;
}
#id_topics{
  width: 100%;
}
/* 
Styling Google Maps
 */
  /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
       #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        /* height: 100%; */
        margin: 0;
        padding: 0;
      }
      #description {
        font-family: Roboto;
        font-size: 15px;
        font-weight: 300;
      }

      #infowindow-content .title {
        font-weight: bold;
      }

      #infowindow-content {
        display: none;
      }

      #map #infowindow-content {
        display: inline;
      }

      .pac-card {
        margin: 10px 10px 0 0;
        border-radius: 2px 0 0 2px;
        box-sizing: border-box;
        -moz-box-sizing: border-box;
        outline: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        background-color: #fff;
        font-family: Roboto;
      }

      #pac-container {
        padding-bottom: 12px;
        margin-right: 12px;
      }

      .pac-controls {
        display: inline-block;
        padding: 5px 11px;
      }

      .pac-controls label {
        font-family: Roboto;
        font-size: 13px;
        font-weight: 300;
      }

      #id_location {
        background-color: #fff;
        font-size: 15px;
        font-weight: 300;
        margin-bottom: 10px;
        padding: 0 11px 0 13px;
        text-overflow: ellipsis;
        width: 100%;
        height: 35px;
      }

      #id_location:focus {
        border-color: #4d90fe;
      }

      #title {
        color: #fff;
        background-color: #4d90fe;
        font-size: 25px;
        font-weight: 500;
        padding: 6px 12px;
      }
      #target {
        width: 345px;
      }
      #id_desc{
        height: 150px;
      }
</style>
<body>

  <div>
    <p style="border: 1px solid transparent"><a href="{% url 'home' %}" style="color: blue;text-decoration: none;float: right;margin-right: 20px;margin-top: 30px;"><small>BACK HOME</small></a></p>
  </div>
<form id="regForm" method="POST" style="border: 1px solid rgb(214, 213, 213);">
{% csrf_token %}
  <!-- One "tab" for each step in the form: -->
  <div class="tab">
    <div style="margin-top: -40px;width: 109.5%;margin-left: -40px;">
        <div style="height: 20%;width: 100%;">
            <h1 style="font-weight: bolder;margin-left: -310px;margin-top: 50px;">First, set your group's location</h1>
            <p style="margin-left: 50px;">MeetApp groups meets locally and in person. We'll connect you with people who live in <br> <span> and 
                around your area </span>
            </p>
        </div>
        <h2 style="margin-left: 50px;"><span><img src="{% static '/images/baseline_my_location_black_18dp.png' %}" alt=""></span> Dar es Salaam,TZ <small style="font-size: 14px;margin-left: 7px;"><a href="#" style="text-decoration: none;" data-toggle="modal" data-target="#myModal">change location</a></small></h2>
        <!-- Google Map Modal -->
          <!-- The Modal -->
          <div class="modal fade" id="myModal" style="height: 100%;width: 100%;">
            <div class="modal-dialog modal-dialog-centered" style="height: 100%;width: 1000px;">
              <div class="modal-content" style="height: 90%;">
              
                <!-- Modal Header -->
                <div class="modal-header" style="height: 52px">
                  <h4 class="modal-title">Set your location</h4>
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                
                <!-- Modal body -->
                <div class="modal-body" style="margin-top: -10px;">
                  {{ form.location }}
                  <div id="map"></div>
                </div>
                
                <!-- Modal footer -->
                <div class="modal-footer" style="margin-top: 15px;">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal" style="background-color: rgb(165, 42, 42);border: 0%;">Save
                  </button>
                </div>
                
              </div>
            </div>
          </div>
    </div>
  </div>

  <!-- Trial Tab -->
  <div class="tab" style="height: fit-content;">
    <div style="margin-top: -40px;width: 109.5%;margin-left: -40px;">
        <div style="height: 20%;width: 100%;">
            <h2 style="font-weight: bolder;margin-left: 45px;margin-top: 50px;">Choose few topics that describe your group's interests</h2>
            <p style="margin-left: 50px;">Be specific! This will help us promote your group to the right people.
            You can choose up to 10 topics.
            </p>
        </div>
        <ul id="buttons">
            {{ form.topics }}
        </ul>
    </div>
    <br>
        <span><a href="#" style="color: rgb(27, 27, 27);text-decoration: none;margin-left: 20px;">Show More</a></span>
  </div>

  <!-- Third Tab -->
  <div class="tab">
    <div style="margin-top: -40px;width: 109.5%;margin-left: -40px;">
        <div style="height: 20%;width: 100%;">
            <h1 style="font-weight: bolder;margin-left: -195px;margin-top: 50px;">What will the name of your group be?</h1>
            <p style="margin-left: 50px;">Choose a name that will give people a clear idea of what the group is about. Feel free to get creative! You can edit this <br> later if you change your mind.
            </p>
        </div>
    </div>
    {{ form.name }}
  </div>

  <!-- Fourth Tab -->
  <div class="tab">
    <div style="width: auto;height: auto;">
      <h1 style="font-weight: bolder;margin-left: -50px;">Now describe what your group will be about</h1>
      <p style="margin-top: -5px;">People will see this when we promote your group,but you will be able to add to it later too.</p>
      <p style="margin-top: -5px;">1. What's the purpose of the group?</p>
      <p style="margin-top: -10px;">2. Who should join? </p>
      <p style="margin-top: -10px;">3. What will you do at your events?</p>
      {% comment %} <textarea name="group_desc" id="" cols="102" rows="10" placeholder="Please write at least 50 characters" style="border-radius: 5px;margin-left: 20px;" required></textarea> {% endcomment %}
      {{ form.desc }}
      <div style="background-color: rgb(255, 255, 255);">
        <h4><span><img class="rotateImage" src="{% static '/images/round_sunny.png' %}" alt="" width="30" height="30"></span> <span style="margin-left: 5px;margin-top: -5px;">Here is an example</span></h4>
        <p style="padding: 5px;margin-left: 20px;">
          "This is a group for anyone interested in hiking, rock climbing, camping, kayaking, bouldering, etc. All skill levels are welcome. I started this group to meet other outdoor enthusiasts. Looking forward to exploring the outdoors with everybody."
        </p>
      </div>
    </div>
  </div>

  <!-- Fifth Tab -->
  <div class="tab">
    <div style="width: auto;height: auto;">
      <h1 style="font-weight: bolder;margin-left: -65px;">Almost there! Take a moment to review our guidelines</h1>
      <p style="margin-top: -5px;">MeetApp is all about helping people live fuller, happier lives—with the help of strong communities. This means that all groups should:</p>
      <p style="margin-top: -5px;">1. Be transparent about the group’s intentions</p>
      <p style="margin-top: -10px;">2. Meet in real life</p>
      <p style="margin-top: -10px;">3. Encourage real human interactions</p>
      <p style="margin-top: -10px;">4. Provide growth opportunities for members</p>
    </div>
    <div style="width: auto;height: auto;margin-top: 10px;">
      <p>You can read more about this in our <a href="#" style="color: blue;text-decoration: none;">Community guidelines</a></p> <br>
      <p>Once you submit your group, a human at MeetApp will review it based on these guidelines and make sure it gets promoted to the right people.</p>
    </div>
  </div>

  <!-- Buttons -->
  <div style="overflow:auto;">
    <div style="float:right;">
      <button type="button" id="prevBtn" onclick="nextPrev(-1)">Previous</button>
      <button type="button" id="nextBtn" onclick="nextPrev(1)" style="background-color: rgb(165, 42, 42);">Next</button>
    </div>
  </div>

  <!-- Circles which indicates the steps of the form: -->
  <div style="text-align:center;margin-top:40px;">
    <span class="step"></span>
    <span class="step"></span>
    <span class="step"></span>
    <span class="step"></span>
    <span class="step"></span>
    <!-- <span class="step"></span> -->
  </div>
</form>

<script>
var currentTab = 0; // Current tab is set to be the first tab (0)
showTab(currentTab); // Display the current tab

function showTab(n) {
  // This function will display the specified tab of the form...
  var x = document.getElementsByClassName("tab");
  x[n].style.display = "block";
  //... and fix the Previous/Next buttons:
  if (n == 0) {
    document.getElementById("prevBtn").style.display = "none";
  } else {
    document.getElementById("prevBtn").style.display = "inline";
  }
  if (n == (x.length - 1)) {
    document.getElementById("nextBtn").innerHTML = "Agree & Submit";
  } else {
    document.getElementById("nextBtn").innerHTML = "Next";
  }
  //... and run a function that will display the correct step indicator:
  fixStepIndicator(n)
}

function nextPrev(n) {
  // This function will figure out which tab to display
  var x = document.getElementsByClassName("tab");
  // Exit the function if any field in the current tab is invalid:
  if (n == 1 && !validateForm()) return false;
  // Hide the current tab:
  x[currentTab].style.display = "none";
  // Increase or decrease the current tab by 1:
  currentTab = currentTab + n;
  // if you have reached the end of the form...
  if (currentTab >= x.length) {
    // ... the form gets submitted:
    document.getElementById("regForm").submit();
    return false;
  }
  // Otherwise, display the correct tab:
  showTab(currentTab);
}

function validateForm() {
  // This function deals with validation of the form fields
  var x, y, i, valid = true;
  x = document.getElementsByClassName("tab");
  y = x[currentTab].getElementsByTagName("input");
  // A loop that checks every input field in the current tab:
  for (i = 0; i < y.length; i++) {
    // If a field is empty...
    if (y[i].value == "") {
      // add an "invalid" class to the field:
      y[i].className += " invalid";
      // and set the current valid status to false
      valid = false;
    }
  }

  // If the valid status is true, mark the step as finished and valid:
  if (valid) {
    document.getElementsByClassName("step")[currentTab].className += " finish";
  }
  return valid; // return the valid status
}

function fixStepIndicator(n) {
  // This function removes the "active" class of all steps...
  var i, x = document.getElementsByClassName("step");
  for (i = 0; i < x.length; i++) {
    x[i].className = x[i].className.replace(" active", "");
  }
  //... and adds the "active" class on the current step:
  x[n].className += " active";
}

//Google Maps
function initAutocomplete() {
        var map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: -33.8688, lng: 151.2195},
          zoom: 13,
          mapTypeId: 'roadmap'
        });

        // Create the search box and link it to the UI element.
        var input = document.getElementById('id_location');
        var searchBox = new google.maps.places.SearchBox(input);
        map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);

        // Bias the SearchBox results towards current map's viewport.
        map.addListener('bounds_changed', function() {
          searchBox.setBounds(map.getBounds());
        });

        var markers = [];
        // Listen for the event fired when the user selects a prediction and retrieve
        // more details for that place.
        searchBox.addListener('places_changed', function() {
          var places = searchBox.getPlaces();

          if (places.length == 0) {
            return;
          }

          // Clear out the old markers.
          markers.forEach(function(marker) {
            marker.setMap(null);
          });
          markers = [];

          // For each place, get the icon, name and location.
          var bounds = new google.maps.LatLngBounds();
          places.forEach(function(place) {
            if (!place.geometry) {
              console.log("Returned place contains no geometry");
              return;
            }
            var icon = {
              url: place.icon,
              size: new google.maps.Size(71, 71),
              origin: new google.maps.Point(0, 0),
              anchor: new google.maps.Point(17, 34),
              scaledSize: new google.maps.Size(25, 25)
            };

            // Create a marker for each place.
            markers.push(new google.maps.Marker({
              map: map,
              icon: icon,
              title: place.name,
              position: place.geometry.location
            }));

            if (place.geometry.viewport) {
              // Only geocodes have viewport.
              bounds.union(place.geometry.viewport);
            } else {
              bounds.extend(place.geometry.location);
            }
          });
          map.fitBounds(bounds);
        });
      }
// Google Maps Ends


</script>
<!-- Google Maps API key link -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAx4zBcZDQ9Msa2D1k8I9UzIjpSrxGeeo0&callback=initAutocomplete"
         async defer>
</script>

</body>
</html>